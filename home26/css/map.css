/* 全局基础设置 */
/* 允许地图页内部滚动，高度设为100vh */
#slide7 {
  overflow-y: auto !important; 
  height: 100vh;
  -webkit-overflow-scrolling: touch;
}

/* 修正 Sticky 样式上下文 */
#slide7 .home-hero {
  overflow: visible; 
}

body {
  background: #13140e;
  color: #f4f3e8;
  margin: 0;
  padding: 0;
  /* 防止浏览器默认滚动行为干扰 Lenis */
  overflow-x: hidden;
  font-family: 'JetBrains Mono', 'Noto Sans JP', sans-serif;
}

/* --- Mask Layer 配置 --- */
.mask-layer {
  mask-position: center;
  -webkit-mask-position: center;
  mask-repeat: no-repeat;
  -webkit-mask-repeat: no-repeat;
  /* Mask Image 路径在 JS 中动态设置 */
}

/* --- 动效: 呼吸灯 --- */
.pulse-hotspots {
  animation: pulse 2s infinite ease-in-out;
}

@keyframes pulse {
  0%, 100% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.02); }
}

/* --- 动效: 亮度增强 --- */
.grid-svg, .hotspots-svg {
  filter: brightness(150%) drop-shadow(0 0 5px rgba(235, 252, 114, 0.3));
}

/* --- 动效: 雨水 --- */
.rain-overlay {
  pointer-events: none;
  opacity: 0.6;
  mix-blend-mode: screen;
}

/* --- Lenis 滚动库推荐设置 --- */
html.lenis, html.lenis body { height: auto; }
.lenis.lenis-smooth { scroll-behavior: auto !important; }
.lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
.lenis.lenis-stopped { overflow: hidden; }

/* --- GPS / Tech UI 动效 --- */
@keyframes ping-slow {
  0% { transform: scale(0.5); opacity: 0.8; }
  100% { transform: scale(2); opacity: 0; }
}

.animate-ping-slow {
  animation: ping-slow 3s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* 小光点 (巡逻点) 基础样式 */
.patrol-dot {
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background-color: #ebfc72;
  box-shadow: 0 0 4px rgba(235, 252, 114, 0.6);
  opacity: 0.8;
  transition: opacity 0.5s;
}

/* 红色小光点 (敌人/威胁) */
.patrol-dot.enemy {
  background-color: #ff4d4d;
  box-shadow: 0 0 4px rgba(255, 77, 77, 0.6);
}

/* --- 常驻地标文字样式 --- */
.map-marker {
  position: absolute;
  font-size: 12px;
  font-weight: normal;
  color: #ffffff;
  /* 强阴影保证可见性 */
  text-shadow: 0 0 2px #000, 0 0 4px #000, 0 0 8px rgba(0,0,0,0.8);
  cursor: pointer;
  z-index: 30;
  white-space: nowrap; 
  transform: translate(-50%, -50%);
  transition: transform 0.3s;
}

.map-marker:hover {
  color: #ebfc72;
  transform: translate(-50%, -50%) scale(1.1);
}

/* 地标位置微调 */
.map-G { top: 30%; left: 75%; }
.map-X { top: 50%; left: 54%; }
.map-C { top: 55%; left: 84%; }
.map-S { top: 53%; left: 37%; }
.map-Y { top: 20%; left: 25%; }