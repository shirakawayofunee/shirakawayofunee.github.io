<!DOCTYPE html>
<html lang="zh">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5W78LXJT');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‹å‘½ã®ç¹”æ©Ÿ</title>
    <link rel="stylesheet" href="css/scene.css">
    </head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SSTEMY36NM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-SSTEMY36NM');
    </script>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W78LXJT"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- èƒŒæ™¯è£…é¥°å±‚ -->
    <div class="bg-layer"></div>

    <div class="main-container">
        
        <!-- å·¦ä¾§ï¼šc (Directory) -->
        <aside class="panel directory-panel">
    <!-- ä¿®æ”¹ç‚¹ï¼šå¢åŠ äº† header-box å®¹å™¨ -->
    <div class="dir-header">
        <div class="header-box">
            <h1 class="main-title">é‹å‘½ã®ç¹”æ©Ÿ</h1>
            <p class="sub-title">>./USER_LOGS.EXE</p>
        </div>
    </div>

            <!-- æœç´¢æ¡† -->
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" id="chapter-search" placeholder="æ¤œç´¢">
            </div>

            <!-- åˆ†ç±»æ ‡ç­¾ (Tabs) -->
            <div class="category-tabs" id="category-tabs">
                <!-- JS åŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- ç« èŠ‚åˆ—è¡¨ -->
            <div class="chapter-list" id="chapter-list">
                <!-- JS åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </aside>

        <!-- ä¸­é—´ï¼šå‰§æœ¬æ­£æ–‡ (Script) -->
<!-- ä¸­é—´ï¼šå‰§æœ¬ä¸»å®¹å™¨ (Wrapper) -->
<main class="panel script-wrapper">

    <!-- 1. é¡¶éƒ¨å›ºå®šå±‚ (ç²¾ç®€ç‰ˆï¼šåªæ˜¾ç¤ºæ¦‚è¦) -->
    <div class="script-header-layer" id="script-header">

        <!-- æ¦‚è¦å®¹å™¨ -->
        <div class="header-summary-box">
            <p class="chapter-summary" id="header-summary">WAITING FOR INPUT...</p>
        </div>

        <!-- æ²‰æµ¸æ¨¡å¼å¼€å…³ (ä¿ç•™) -->
        <button class="immersive-btn" onclick="enableImmersiveMode()" title="Immersive Mode">
            <!-- <span class="immersive-icon">â›¶</span> -->
            Ã—
        </button>
    </div>

    <!-- 2. å‰§æœ¬æ­£æ–‡æ»šåŠ¨åŒº (ä¿ç•™ id="script-panel" å…¼å®¹åŸæœ‰é€»è¾‘) -->
    <div class="script-scroll-area" id="script-panel">
        <div class="script-content" id="script-content">
            <div class="loading-text">é‹å‘½ã‚’èª­ã¿å–ã‚Šä¸­â€¦â€¦</div>
        </div>
        <!-- åº•éƒ¨å ä½ï¼Œé˜²æ­¢æ–‡å­—è¢«æ‚¬æµ®æŒ‰é’®æŒ¡ä½ -->
        <div style="height: 120px;"></div> 
    </div>



</main>

    <!-- 3. æ°¸ä¹…æ‚¬æµ®å¯¼èˆªæŒ‰é’®å±‚ -->
    <div class="floating-nav-layer">
        <button id="float-btn-prev" class="neo-float-btn prev-btn" onclick="navigate(-1)">
            å‰ç« 
        </button>
        
        <button id="float-btn-next" class="neo-float-btn next-btn" onclick="navigate(1)">
            æ¬¡ç« 
        </button>
    </div>
        <!-- å³ä¾§ï¼šä¿¡æ¯æ  (Info) -->
        <aside class="panel info-panel">
            <!-- 1. ç”¨èªè§£èª¬ -->
            <div class="info-section">
                <h4 class="info-title">ç”¨èªè§£èª¬</h4>
                <div id="glossary-container"></div>
            </div>

            <!-- 2. å‡ºåœºè§’è‰² -->
            <div class="info-section">
                <h4 class="info-title">ç™»å ´äººç‰©</h4>
                <div id="characters-container"></div>
            </div>

            <!-- 3. ã‚ã‚‰ã™ã˜ -->
            <div class="info-section">
                <h4 class="info-title">ã‚ã‚‰ã™ã˜</h4>
                <div id="synopsis-container" class="synopsis-text"></div>
            </div>
        </aside>

    </div>

    <!-- BGM æ§åˆ¶ -->
    <div class="music-controls">
        <img src="img/v2c.png" id="btn-play" class="music-icon" alt="Play" style="display: block;">
        <img src="img/v2.gif" id="btn-pause" class="music-icon" alt="Pause" style="display: none;">
    </div>
    <audio id="bgm-player" loop></audio>

    <script src="js/scene.js"></script>
</body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W78LXJT"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDlcorBh1IJUnelC_8-5bf2i4h--P4q7nE",
      authDomain: "fangkeshuju.firebaseapp.com",
      databaseURL: "https://fangkeshuju-default-rtdb.firebaseio.com",
      projectId: "fangkeshuju",
      storageBucket: "fangkeshuju.firebasestorage.app",
      messagingSenderId: "1043722790851",
      appId: "1:1043722790851:web:0f18cdd909c9512c02ff76",
      measurementId: "G-4T3124FZB5"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>
</html>