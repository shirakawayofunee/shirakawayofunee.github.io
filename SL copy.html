<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#F8F7F8">
    <title>2人雰囲気</title>
    <meta property="og:type" content="website">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: #fff;
            color: #333;
            overflow-x: hidden;
        }

        /* 其他样式省略 */

        .gallery-section {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        .gallery-header .nav-tabs {
            border-bottom: 2px solid #000;
        }

        .gallery-header .nav-link {
            font-size: 1.5em;
            font-weight: 700;
            color: #ccc;
            padding: 5px 15px;
        }

        .gallery-header .nav-link.active {
            color: #000;
            border-bottom: 2px solid #000;
        }

        /* 瀑布流容器 */
        .gallery-container {
            display: flex;
            gap: 15px; /* 列间距 */
            width: 100%;
        }

        .gallery-column {
            flex: 1; /* 每列均分宽度 */
            display: flex;
            flex-direction: column;
            gap: 15px; /* 图片垂直间距 */
        }

        .gallery-item {
            width: 100%;
        }

        .gallery-image {
            width: 100%;
            height: auto;
            border-radius: 5px;
            object-fit: cover;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .gallery-image:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 992px) {
            .gallery-container {
                display: grid;
                grid-template-columns: 1fr 1fr; /* 2列 */
            }
        }

        @media (max-width: 576px) {
            .gallery-container {
                display: block; /* 单列 */
            }
            .gallery-column {
                margin-bottom: 15px;
            }
        }

        /* 模态框样式省略 */
    </style>
</head>
<body>
    <!-- 其他部分省略 -->

    <!-- 画廊部分 -->
    <div class="gallery-section mt-5">
        <div class="gallery-header mb-3">
            <ul class="nav nav-tabs" id="galleryTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="gallery-tab" data-bs-toggle="tab" href="#gallery" role="tab" aria-controls="gallery" aria-selected="true">gallery</a>
                </li>
            </ul>
        </div>

        <div class="tab-content" id="galleryTabContent">
            <div class="tab-pane fade show active" id="gallery" role="tabpanel" aria-labelledby="gallery-tab">
                <div class="gallery-container" id="galleryContainer"></div>
            </div>
        </div>
    </div>

    <!-- 模态框省略 -->

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        const images = [
            { src: "img/SL/SL1.jpg", alt: "Gallery Image 1" },
            { src: "img/SL/SL2.jpg", alt: "Gallery Image 2" },
            { src: "img/SL/SL3.jpg", alt: "Gallery Image 3" },
            { src: "img/SL/SL4.jpg", alt: "Gallery Image 4" },
            { src: "img/SL/SL5.jpg", alt: "Gallery Image 5" },
            { src: "img/SL/SL6.jpg", alt: "Gallery Image 6" },
            { src: "img/SL/SL7.jpg", alt: "Gallery Image 7" },
            { src: "img/SL/SL8.jpg", alt: "Gallery Image 8" },
            { src: "img/SL/SL9.jpg", alt: "Gallery Image 9" },
            { src: "img/SL/SL10.jpg", alt: "Gallery Image 10" },
            { src: "img/SL/SL11.jpg", alt: "Gallery Image 11" },
            { src: "img/SL/SL12.jpg", alt: "Gallery Image 12" },
            { src: "img/SL/SL13.jpg", alt: "Gallery Image 13" },
            { src: "img/SL/SL14.jpg", alt: "Gallery Image 14" },
            { src: "img/SL/SL15.jpg", alt: "Gallery Image 15" },
            { src: "img/SL/SL16.jpg", alt: "Gallery Image 16" },
            // 以下为预留图片，注释掉以便后续解注释
            // { src: "img/SL/SL17.jpg", alt: "Gallery Image 17" },
            // { src: "img/SL/SL18.jpg", alt: "Gallery Image 18" },
            // { src: "img/SL/SL19.jpg", alt: "Gallery Image 19" },
            // { src: "img/SL/SL20.jpg", alt: "Gallery Image 20" },
            // { src: "img/SL/SL21.jpg", alt: "Gallery Image 21" },
            // { src: "img/SL/SL22.jpg", alt: "Gallery Image 22" },
            // { src: "img/SL/SL23.jpg", alt: "Gallery Image 23" },
            // { src: "img/SL/SL24.jpg", alt: "Gallery Image 24" },
            // { src: "img/SL/SL25.jpg", alt: "Gallery Image 25" },
            // { src: "img/SL/SL26.jpg", alt: "Gallery Image 26" },
            // { src: "img/SL/SL27.jpg", alt: "Gallery Image 27" },
            // { src: "img/SL/SL28.jpg", alt: "Gallery Image 28" },
            // { src: "img/SL/SL29.jpg", alt: "Gallery Image 29" },
            // { src: "img/SL/SL30.jpg", alt: "Gallery Image 30" },
            // { src: "img/SL/SL31.jpg", alt: "Gallery Image 31" },
            // { src: "img/SL/SL32.jpg", alt: "Gallery Image 32" },
            // { src: "img/SL/SL33.jpg", alt: "Gallery Image 33" },
            // { src: "img/SL/SL34.jpg", alt: "Gallery Image 34" },
            // { src: "img/SL/SL35.jpg", 급: "Gallery Image 35" },
            // { src: "img/SL/SL36.jpg", alt: "Gallery Image 36" },
            // { src: "img/SL/SL37.jpg", alt: "Gallery Image 37" },
            // { src: "img/SL/SL38.jpg", alt: "Gallery Image 38" },
            // { src: "img/SL/SL39.jpg", alt: "Gallery Image 39" },
            // { src: "img/SL/SL40.jpg", alt: "Gallery Image 40" }
        ];

        const galleryContainer = document.getElementById('galleryContainer');

        function arrangeWaterfall() {
            galleryContainer.innerHTML = '';

            const width = window.innerWidth;
            const columnCount = width > 992 ? 3 : width > 576 ? 2 : 1;

            const columns = Array(columnCount).fill().map(() => {
                const col = document.createElement('div');
                col.className = 'gallery-column';
                galleryContainer.appendChild(col);
                return col;
            });

            const columnHeights = Array(columnCount).fill(0);

            images.forEach((image, index) => {
                const item = document.createElement('div');
                item.className = 'gallery-item';

                const img = document.createElement('img');
                img.src = image.src;
                img.alt = image.alt;
                img.className = 'img-fluid gallery-image';
                img.setAttribute('data-bs-toggle', 'modal');
                img.setAttribute('data-bs-target', '#imageModal');
                img.setAttribute('data-src', image.src);
                img.setAttribute('data-index', index);

                item.appendChild(img);

                const minHeightIndex = columnHeights.indexOf(Math.min(...columnHeights));
                columns[minHeightIndex].appendChild(item);

                img.onload = () => {
                    columnHeights[minHeightIndex] += img.offsetHeight + 15;
                };
                if (img.complete) {
                    columnHeights[minHeightIndex] += img.offsetHeight + 15;
                }
            });
        }

        window.addEventListener('load', arrangeWaterfall);
        window.addEventListener('resize', arrangeWaterfall);

        // 模态框和导航逻辑
        const modalImage = document.getElementById('modalImage');
        const prevButton = document.getElementById('prevImage');
        const nextButton = document.getElementById('nextImage');
        let currentIndex = 0;

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.gallery-image').forEach(image => {
                image.addEventListener('click', function () {
                    const src = this.getAttribute('data-src');
                    currentIndex = parseInt(this.getAttribute('data-index'));
                    modalImage.src = src;
                });
            });
        });

        prevButton.addEventListener('click', function () {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            modalImage.src = images[currentIndex].src;
        });

        nextButton.addEventListener('click', function () {
            currentIndex = (currentIndex + 1) % images.length;
            modalImage.src = images[currentIndex].src;
        });

        document.addEventListener('keydown', function (event) {
            if (event.key === 'ArrowLeft' && document.getElementById('imageModal').classList.contains('show')) {
                prevButton.click();
            } else if (event.key === 'ArrowRight' && document.getElementById('imageModal').classList.contains('show')) {
                nextButton.click();
            }
        });
    </script>
</body>
</html>