<!--
 * @Author: 左措 73263982+kiiyorku@users.noreply.github.com
 * @Date: 2025-02-10 11:38:26
 * @LastEditors: 左措 73263982+kiiyorku@users.noreply.github.com
 * @LastEditTime: 2025-02-24 01:21:39
 * @FilePath: \shirakawayofunee.github.io\AU\gxx.html
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html lang="zh-CN">
<title>関係性 ReLationship</title>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href=css/gxx.css" rel="stylesheet">
  <style>
    /* 防篡改基础样式 */
    body {
      display: flex;
      flex-direction: column;
      gap: 20px;
      padding: 80px;
      font-family: "Microsoft YaHei", sans-serif;
      background: #FBFBFB;
    }

    /* 数据容器-禁用所有交互 */
    .metric-container {
      display: flex;
      gap: 00px;
      /* justify-content: center; */
      pointer-events: none;
      /* 禁用鼠标事件 */
      user-select: none;
      /* 禁止文字选择 */
      justify-content: space-between;
      /* 左右两端对齐 */
    }

    /* 左侧指标项（文字左对齐） */
    .metric-item.left-item {
      text-align: left;
    }

    /* 右侧指标项（文字右对齐） */
    .metric-item.right-item {
      text-align: right;
    }


    /* 指标项-固定布局 */
    .metric-item {
      width: 720px;
      opacity: 0.999;
      /* 绕过开发者工具样式覆盖 */
    }

    /* 数据标签样式 */
    .metric-label {
      font-size: 16px;
      color: #000;
      margin-bottom: 8px;
    }

    /* 进度条容器-固定尺寸 */
    .progress-container {
      height: 24px;
      background: #ffffff;
      /* border-radius: 6px; */
      overflow: hidden;
      position: relative;
      outline: 1.5px solid black;
      /* 黑色描边 */
    }

    /* 动态进度条（通过伪元素实现） */
    .progress-container.left::after {
      content: "";
      display: block;
      height: 100%;
      background: #FF0020;
      /* 红色 */
      background: #ECEBF3;
      /* border-radius: 6px; */
      width: var(--progress);
      /* 后台控制变量 */
      transition: width 0.3s;
    }

    .progress-container.right::after {
      content: "";
      display: block;
      height: 100%;
      background: #676DB9;
      /* 蓝色 */
      /* border-radius: 6px; */
      width: var(--progress);
      /* 后台控制变量 */
      transition: width 0.3s;
      position: absolute;
      /* 关键修改：绝对定位 */
      right: 0;
      /* 从右侧开始填充 */
      /* transform: scaleX(-1); */
      /* 从右向左播放 */
    }

    /* 当进度为 0% 时的样式 */
    .progress-container.left.zero::after,
    .progress-container.right.zero::after {
      background: #000 !important;
    }

    .metric-container {
      pointer-events: none;
      /* 禁用所有鼠标事件 */
      user-select: none;
      /* 防止用户选择文字 */
    }

    .metric-item {
      opacity: 0.999;
      /* 绕过浏览器开发者工具的样式覆盖检测 */
    }
  </style>
</head>

<body>
  <!-- 每个进度值通过内联style由服务端注入 -->
  <div class="metric-container">
    <div class="metric-item left-item">
      <div class="metric-label">信頼度</div>
      <div class="progress-container left" style="--progress: 75%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">信頼度</div>
      <div class="progress-container right" style="--progress: 95%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">忠誠度</div>
      <div class="progress-container left zero"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">忠誠度</div>
      <div class="progress-container right" style="--progress: 100%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">依存度</div>
      <div class="progress-container left" style="--progress: 35%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">依存度</div>
      <div class="progress-container right" style="--progress: 90%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">保護欲</div>
      <div class="progress-container left" style="--progress: 100%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">保護欲</div>
      <div class="progress-container right" style="--progress: 100%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">征服欲</div>
      <div class="progress-container left" style="--progress: 10%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">征服欲</div>
      <div class="progress-container right" style="--progress: 25%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">独占欲</div>
      <div class="progress-container left" style="--progress: 50%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">独占欲</div>
      <div class="progress-container right" style="--progress: 85%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">優越感</div>
      <div class="progress-container left" style="--progress: 5%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">優越感</div>
      <div class="progress-container left zero"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">功利性</div>
      <div class="progress-container left zero"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">功利性</div>
      <div class="progress-container left zero"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">娯楽性</div>
      <div class="progress-container left" style="--progress: 60%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">娯楽性</div>
      <div class="progress-container right" style="--progress: 25%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">愛情</div>
      <div class="progress-container left" style="--progress: 30%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">愛情</div>
      <div class="progress-container right" style="--progress: 99%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">理性</div>
      <div class="progress-container left" style="--progress: 80%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">理性</div>
      <div class="progress-container right" style="--progress: 20%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">親情</div>
      <div class="progress-container left" style="--progress: 70%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">親情</div>
      <div class="progress-container right" style="--progress: 100%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">友情</div>
      <div class="progress-container left" style="--progress: 70%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">友情</div>
      <div class="progress-container right" style="--progress: 60%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">献身</div>
      <div class="progress-container left" style="--progress: 85%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">献身</div>
      <div class="progress-container right" style="--progress: 99%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">欲求</div>
      <div class="progress-container left" style="--progress: 20%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">欲求</div>
      <div class="progress-container right" style="--progress: 60%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">偏愛</div>
      <div class="progress-container left" style="--progress: 90%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">偏愛</div>
      <div class="progress-container right" style="--progress: 100%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">支配</div>
      <div class="progress-container left" style="--progress: 60%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">支配</div>
      <div class="progress-container right" style="--progress: 10%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">服従</div>
      <div class="progress-container left" style="--progress: 3%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">服従</div>
      <div class="progress-container right" style="--progress: 90%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">崇拜</div>
      <div class="progress-container left zero"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">崇拝</div>
      <div class="progress-container right" style="--progress: 90%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">同情</div>
      <div class="progress-container left" style="--progress: 70%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">同情</div>
      <div class="progress-container right" style="--progress: 15%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">歓楽</div>
      <div class="progress-container left" style="--progress: 60%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">歓楽</div>
      <div class="progress-container right" style="--progress: 100%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">苦痛</div>
      <div class="progress-container left zero"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">苦痛</div>
      <div class="progress-container right" style="--progress: 15%"></div>
    </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">情欲</div>
      <div class="progress-container left" style="--progress: 20%"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">情欲</div>
      <div class="progress-container right" style="--progress: 80%"></div>
    </div>

  </div>
  </div>
  <div class="metric-container">
    <div class="metric-item">
      <div class="metric-label">敵意</div>
      <div class="progress-container left zero"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">敵意</div>
      <div class="progress-container left zero"></div>
    </div>
  </div>
  </div>
  <div class="metric-container">
    <div class="metric-item left-item">
      <div class="metric-label">悪意</div>
      <div class="progress-container left zero"></div>
    </div>
    <div class="metric-item right-item">
      <div class="metric-label">悪意</div>
      <div class="progress-container left zero"></div>
    </div>
  </div>

  <!-- 其他指标项同理 -->
  <!--     // 前端保护脚本（需放在body末尾） -->

  <script>
    (function () {
      setInterval(() => {
        document.querySelectorAll('.progress-container').forEach(el => {
          const originalWidth = el.style.getPropertyValue('--progress');
          const currentWidth = getComputedStyle(el).getPropertyValue('--progress');
          if (currentWidth !== originalWidth) {
            el.style.setProperty('--progress', originalWidth);
          }
        });
      }, 1000); // 每秒校验一次
    })();
  </script>
</body>
<script type="module">
  // 导入 Firebase SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-analytics.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-firestore.js";

  // Firebase 配置
  const firebaseConfig = {
    apiKey: "AIzaSyDlcorBh1IJUnelC_8-5bf2i4h--P4q7nE",
    authDomain: "fangkeshuju.firebaseapp.com",
    projectId: "fangkeshuju",
    storageBucket: "fangkeshuju.firebasestorage.app",
    messagingSenderId: "1043722790851",
    appId: "1:1043722790851:web:01cca5afff820eb202ff76",
    measurementId: "G-MGC7KEWX53"
  };

  // 初始化 Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  // 记录页面访问事件并保存到 Firestore
  async function logPageView() {
    try {
      await addDoc(collection(db, 'page_views'), {
        page_title: document.title,
        page_location: window.location.href,
        page_path: window.location.pathname,
        timestamp: serverTimestamp()
      });
      console.log('Page view saved to Firestore');
    } catch (error) {
      console.error('Error saving page view: ', error);
    }
  }

  // 调用函数
  logPageView();

  // 追踪图片查看行为
  const images = document.querySelectorAll('img.trackable');
  images.forEach(img => {
    let startTime = null;

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          startTime = Date.now();
        } else if (startTime) {
          const duration = (Date.now() - startTime) / 1000;
          saveImageView(img.src, duration);
          startTime = null;
        }
      });
    });

    observer.observe(img);
  });

  // 保存图片查看行为到 Firestore
  async function saveImageView(imageSrc, duration) {
    try {
      await addDoc(collection(db, 'image_views'), {
        image_src: imageSrc,
        view_duration: duration,
        timestamp: serverTimestamp()
      });
      console.log('Image view saved to Firestore');
    } catch (error) {
      console.error('Error saving image view: ', error);
    }
  }
</script>
</html>