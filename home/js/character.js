let characterMsg = [

  {
    bg: "1bg.png",
    rolem: "1m.png",
    nocheck: "1.png",
    check: "1c.png",
    title: "1t.png",
    str: "能力者、178cm。<br>犯罪組織の主宰者であり、部下たちから恐れられ、崇拝されている存在。<br>童顔(不老)、実年齢不明。<br>艶やか、常に世を拗ねるような微笑を浮かべている。好き嫌いが激しく、享楽主義者で実用も重んじる、細やかで優しい一面も持っている。<br>落ち着き払った自信に満ちていて、自信かつ優雅な態度を保ち、性格は八方巧み。夹缝中的最强者，将上庭与地底的斗争视作狗咬狗。当前的目标是在自己死前，给下属们寻求新的安全居所。<br>▍好きなもの<br>性格……孤高でそっけなく、決断力と行動力がある、表で暴虐且つ無慈悲だが、裏は温情に富んで、特に部下に対して。<br>逆鱗……花园<br>得意なこと……「栽培」、死の芸術、美学<br>趣味……、<br>好き……花<br>嫌い……自由が制限されること、無意味な犠牲<br>特技……開花、癒し<br>▍背景<br>Lは幼少期、軍人である両親が前線で命を落としました。その命の価値のない犠牲は「崇高な使命のため」とされましたが、彼女にとってその言葉は無意味で、むしろ規則の虚偽と束縛を感じさせるものでした。両親の死は彼女に反抗心を芽生えさせ、彼女は規則に縛られることを拒み、命を代償に禁断の力と契約を結びました。その力を使って、他の人々が規則から解放され、彼女のように自由に生きる手助けをすることを決意します。",
/*     voice: "./mp3/role/1.mp3", */
    image1: "1-1.png",
    image2: "1-2.png"
  },
    {
      bg: "2bg.png",
      rolem: "2m.png",
      nocheck: "2.png",
      check: "2c.png",
      title: "2t.png",
      str: "36歳｜能力者｜187cm<br>第一印象は礼儀正しく、スイーツ作りに万能であり、少しユーモアのある人物。<br>穏やかな長女のような雰囲気を持ち、幼少期に経験したショックがその後の人格形成に大きな影響を与え、<br>「L＞森羅万象」という極端な価値観を抱えて生きている。家族の風邪を世界中のどんな死亡事故よりも深刻に捉えるようになった。服のボタンはすべて、亡くなった親友の遺骨を磨いて作られた骨のボタンです。<br>裏稼業…………………殺し屋<br>誕生日と命日…………………7月23日<br>▍好きなもの<br>性格……<br>逆鱗……Leopold<br>得意なこと……手芸、毒物学<br>趣味……<br>好き……Leopold、図書館、家族<br>嫌い……手続き的正義、または、遅れてやって来る正義。<br>特技……狙撃、癒し<br>▍背景<br><br>▍SとLの初対面<br>界隈内で数少ない有能な殺し屋として、Lのもとに弟子入りしたがる者は後を絶たず、みな彼女の名声に惹かれ、立派な後ろ盾を得ようと目論んでいる。だが、実際にLに教えを受ければ、疲れや苦しみ、傷つきから死ぬまで至り、どんな目に遭うかは各々の定め。だから、Lが本気で受け入れた弟子はほんのわずかだ。<br>Lは手を振って、猫や犬を呼ぶように気軽に人を呼び寄せた。Sは素直に従い、丁寧に礼をして「師匠」と呼んだ。<br>Sの謙虚な態度の下に抑えきれない憎しみが宿った瞳を見て、Lは笑った。「今の君の目、気に入ったよ。ストレートで、率直で、生きる欲望に満ち溢れている…惨めだけと運良く、愚かだけどどこか冴えていて、脆くも確固たる情熱を抱いてる。」<br>Lは████の方へ振り返り、「この子、いただくよ」と告げた。<br>(1/3)",
/*       voice: "./mp3/role/2.mp3", */
      image1: "2-1.png",
      image2: "2-2.png"
    },
    {
      bg: "3bg.png",
      rolem: "3m.png",
      nocheck: "3.png",
      check: "3c.png",
      title: "3t.png",
      str: "能力者<br>X「君、ほんと自由に生きてるな。普通の人はこんな風にすぐ仇を討ったりしないよ。敵が増えるのを恐れ、身近な人まで巻き込まれるのを…復讐の代償に怯えるものだ。君は？そんなもの気にしない？君の部下はどうだい？」<br>L「仇を仇で返しあったらきりがないってことか？私に復讐しに来る奴も、復讐を頼む奴も、数え切れないほどいるよ。今さら君が大義を語るつもり？私が正直で善良で大人しくしてたら、私を放っておいてくれるわけ？違うだろ。君たちが遠慮するのは、私が来た奴を容赦なく殺すからだろう。<br>血の償いは血で返す。今から教えてやろうか？」<br>X「ハハ、それは失礼。君のような強者は、確かに好き勝手やる資格があるよ。」<br>Xは両者の激戦中に舞い落ちるLが作り出した結晶の花びらを受け止め、それを軽く揉みながら、どこか愛でるように眺めた。(2/3)<br>工事中",
/*       voice: "./mp3/role/3.mp3", */
      image1: "3-1.png",
      image2: "3-2.png"
    },
    {
      bg: "4bg.png",
      rolem: "4m.png",
      nocheck: "4.png",
      check: "4c.png",
      title: "4t.png",
      str: "能力者<br>「嘲り、貪欲、興味本位…そんな視線なら嫌というほど見てきた。でも、あなたの目は違う。あなたの目には、私が売り物のような道具じゃなく…対等な人間で映ってる。」<br>（2/3)<br>工事中",
/*       voice: "./mp3/role/4.mp3", */
      image1: "4-1.png",
      image2: "4-2.png"
    },
    {
      bg: "5bg.png",
      rolem: "5m.png",
      nocheck: "5.png",
      check: "5c.png",
      title: "5t.png",
      str: "36岁，殺し屋。能力者。为了延长寿命的情报，伪装成附近的裁缝接近X。<br>对组织首领（Leo）有着近乎信徒般的狂热信仰，<br>「この世には、私たちを受け入れてくれる場所がある。理解してくれる人がいる。彼女はあなたを導き、残酷な復讐の道を支えてくれる。その気持ちさえあれば、私があなたを彼女に会わせてあげる。」<br>H「あなたが言うその人は、あの雇い主？それとも、組織のリーダー？」<br>「それは、私がやっと手に入れた新しい家族だよ。」<br>「もう二度と、誰にも私の大切なものを傷つけさせない。かつての私は復讐のためにすべてを捧げた。今は未来を守るため、その倍の力を尽くす。」<br>(3/3)<br>工事中",
/*       voice: "./mp3/role/5.mp3", */
      image1: "5-1.png",
      image2: "5-2.png"
    },
    {
      bg: "6bg.png",
      rolem: "6m.png",
      nocheck: "6.png",
      check: "6c.png",
      title: "6t.png",
      str: "能力者。廃棄期限まであと一ヶ月しかない人造人は、上庭を裏切る準備をしており、自身を廃棄から免れるための計画を実行中です。<br>腹黒く鬼畜で、目的のためには手段を選ばず、自らも含めた犠牲を厭わないほどです。<br>Lが何十年も育った弟子たちをすべて殺した。なぜなら、Lはその計画において欠かせない、唯一無二の存在だ。<br>Lとの戦いの中で感情の亀裂が生じ、再び感情を取り戻し、Lに恋をする。<br>XはLの人柄と行動を高く評価している。<br>「——使用期限内に、こっそり壊れてしまった道具にすぎないよ。」<br>「これが君が命と引き換えに得た力なんだ。流れるすべての未来を犠牲にして、絶対的な強さと自由を手に入れたんだ。ここまで辿り着けるのは君だけだ。本当に見事だ。君がこれほどまでに強く反骨精神を持っていてくれてありがとう……君なら勝てると分かっていたよ。」<br>工事中",
/*       voice: "./mp3/role/6.mp3", */
      image1: "6-1.png",
      image2: "6-2.png"
    },
    {
      bg: "7bg.png",
      rolem: "7m.png",
      nocheck: "7.png",
      check: "7c.png",
      title: "7t.png",
      str: "能力者。Lの弟子の一人で、数年前にある理由で離反した。<br>今の外部の大混乱で、依頼人として戻り、Lに助けを懇願している。<br><br>工事中",
/*       voice: "./mp3/role/7.mp3", */
      image1: "7-1.png",
      image2: "7-2.png"
    },
    {
      bg: "8bg.png",
      rolem: "8m.png",
      nocheck: "8.png",
      check: "8c.png",
      title: "8t.png",
      str: "「福音地」のリーダー。Lの元上司であり、深い関係がある。それはまた別の長い物語だ。<br>人外、七十歳の老婆の姿で地上を歩く（他の年齢の姿もあり）。<br>メンバー同士にケアなど一切なし、互いに独立し、生死は自己責任。<br>彼らを一つに結びつけているのは、ある種の宿願である。それに身を捧げることはむしろ名誉とされている。<br>▍会話例<br>「また会えて本当に嬉しいよ。君に出会った時もこうやって連れて帰ったんだよね。また一緒に来てくれる？」<br>「君の裏切りに気を悪くした人たちのほとんどはもう犠牲になって、今ならもう一度チャンスをあげられるよ。」<br>L「……いつも私のことわかってるふりしてたでしょう？今さらそんなこと言うの…。」<br>L「地上の人間はみんな自分思いで、己の縄張りを守るのに必死で、せいぜい周りの数人をかばうくらい…。私だってそんなちっぽけな人間だよ。君の壮大な宿願にふさわしくないさ。」",
/*       voice: "./mp3/role/8.mp3", */
      image1: "8-1.png",
      image2: "8-2.png"
    },
    {
      bg: "9bg.png",
      rolem: "9m.png",
      nocheck: "9.png",
      check: "9c.png",
      title: "9t.png",
      str: "上庭からXを協力（監視）するために派遣された代理人。<br>Sの尋問中、逃げられてしまった。<br>冷酷で機械的、典型的な上庭の官僚像を体現しており、<br>任務の効率を最優先し、一般人の命や感情を軽視する。",
/*       voice: "./mp3/role/9.mp3", */
      image1: "9-1.png",
      image2: "9-2.png"
    },
    {
      bg: "10bg.png",
      rolem: "10m.png",
      nocheck: "10.png",
      check: "10c.png",
      title: "10t.png",
      str: "「福音地」的实验品，被上庭抢走后投入使用<br>工事中",
/*       voice: "./mp3/role/10.mp3", */
      image1: "10-1.png",
      image2: "10-2.png"
    }
  ];
  
  var swipreCharacter = null;
  function showCharacter() {
    swipreCharacter = new Swiper('#characterpc', {
      direction: 'vertical',
      slidesPerView: 5,
      centeredSlides: true,
      observer: true,
      observeParents: false,
      slideToClickedSlide: true,
      freeMode: true,
      slidesOffsetBefore: -100,
      loop: true,
      mousewheel: true,
      touchRatio: 0,
      on: {
        slideChange: function(e) {
          changeCharacter(e.realIndex);
        },
        slideChangeTransitionStart: function() {
          this.enabled = false;
        },
        slideChangeTransitionEnd: function() {
          this.enabled = true;
        }
      }
    });
  }
  
  function changeCharacter(num) {
    characterMsg.forEach((v, index) => {
      let id = `.role${index + 1}`;
      $(id).attr("src", `./img/character/${v.nocheck}`);
    });
    let data = characterMsg[num];
    let idM = `.role${num + 1}`;
    $(idM).attr("src", `./img/character/${data.check}`);
    $("#roleBg").css("background-image", `url(./img/role/${data.bg})`)
      .removeClass("animate__animated animate__fadeOut")
      .addClass("animate__animated animate__fadeIn");
    $("#roleTitle").prop("src", `./img/role/${data.title}`)
      .removeClass("characterFadeOutLeft")
      .addClass("characterFadeInRight");
    $("#roleStr").html(data.str)
      .removeClass("characterFadeOutLeft")
      .addClass("characterFadeInRight");
    $("#roleImg").prop("src", `./img/role/${data.image1}`)
      .removeClass("characterFadeOutLeft")
      .addClass("characterFadeInRight");
    $("#roleMusic").prop("src", data.voice);
    $("#roleButton").removeClass("animate__fadeOutDown")
      .addClass("animate__fadeInUp");
    $("#roleSwitch").show();
    $("#roleSwitching").hide();
    $("#roleImg").data("current", "image1");
    playCharacterVioce(2);
  }
  
  function switchCharacterImage() {
    let currentIndex = swipreCharacter.realIndex;
    let data = characterMsg[currentIndex];
    let currentImg = $("#roleImg").data("current");
    if (currentImg === "image1") {
      $("#roleImg").prop("src", `./img/role/${data.image2}`)
        .removeClass("characterFadeOutLeft")
        .addClass("characterFadeInRight");
      $("#roleImg").data("current", "image2");
      $("#roleSwitch").hide();
      $("#roleSwitching").show();
    } else {
      $("#roleImg").prop("src", `./img/role/${data.image1}`)
        .removeClass("characterFadeOutLeft")
        .addClass("characterFadeInRight");
      $("#roleImg").data("current", "image1");
      $("#roleSwitch").show();
      $("#roleSwitching").hide();
    }
  }
  
  function playCharacterVioce(num) {
    if (num === 1) {
      $("#roleMusic")[0].play();
      $("#roleVoiceing").show();
      $("#roleVoice").hide();
    }
    if (num === 2) {
      $("#roleMusic")[0].pause();
      $("#roleVoiceing").hide();
      $("#roleVoice").show();
    }
  }
  
  $("#roleMusic")[0].addEventListener("ended", function() {
    playCharacterVioce(2);
  });
  
  function changeAllSwipperAbled(num) {
    if (num === 1) {
      swiperAll.allowSlideNext = false;
      swiperAll.allowSlidePrev = false;
    }
    if (num === 2) {
      swiperAll.allowSlideNext = true;
      swiperAll.allowSlidePrev = true;
    }
  }
  
  function characterStorage() {
    characterMsg.forEach((v) => {
      let imgBg = new Image();
      let img1 = new Image();
      let img2 = new Image();
      imgBg.src = `./img/role/${v.bg}`;
      img1.src = `./img/role/${v.image1}`;
      img2.src = `./img/role/${v.image2}`;
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const strContainer = document.querySelector('.character-right-right-str');
  
    // 鼠标滚轮滚动
    strContainer.addEventListener('wheel', (event) => {
      event.stopPropagation();
      const scrollAmount = event.deltaY;
      strContainer.scrollTop += scrollAmount * 0.5;
    }, { passive: false });
  
    // 鼠标拖拽滚动
    let isDragging = false;
    let startY = 0;
    let startScrollTop = 0;
  
    strContainer.addEventListener('mousedown', (event) => {
      isDragging = true;
      startY = event.clientY;
      startScrollTop = strContainer.scrollTop;
      strContainer.style.cursor = 'grabbing';
      event.preventDefault();
    });
  
    document.addEventListener('mousemove', (event) => {
      if (!isDragging) return;
      event.preventDefault();
      const deltaY = startY - event.clientY;
      strContainer.scrollTop = startScrollTop + deltaY * 1.5;
    });
  
    document.addEventListener('mouseup', () => {
      isDragging = false;
      strContainer.style.cursor = 'default';
    });
  
    document.addEventListener('mouseleave', () => {
      isDragging = false;
      strContainer.style.cursor = 'default';
    });
  
    // 触摸滑动
    let touchStartY = 0;
    let touchStartScrollTop = 0;
  
    strContainer.addEventListener('touchstart', (event) => {
      touchStartY = event.touches[0].clientY;
      touchStartScrollTop = strContainer.scrollTop;
    }, { passive: false });
  
    strContainer.addEventListener('touchmove', (event) => {
      event.stopPropagation();
      const touchY = event.touches[0].clientY;
      const deltaY = touchStartY - touchY;
      strContainer.scrollTop = touchStartScrollTop + deltaY * 1.5;
    }, { passive: false });
  });