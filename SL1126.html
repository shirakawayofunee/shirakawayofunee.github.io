<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#F8F7F8" />
    <title>2人雰囲気 - SL</title>
    <meta property="og:type" content="website" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" />
    <link rel="stylesheet" href="css/papermask.css" media="(min-device-width:926px)">
    <link rel="stylesheet" href="css/papermaskDetail.css" media="(min-device-width:926px)" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Roboto", sans-serif;
            background: #06070d;
            color: #333;
            overflow-x: hidden;
        }

        .floating-text {
            position: fixed;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 5px;
            z-index: 1000;
            max-width: 1920px;
            width: 100vw;
            box-sizing: border-box;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: left;
        }

        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 0 10px;
        }

        .close-button:hover {
            color: #ccc;
        }

/*         .gallery-section=root {
            padding: 1%;
        } */

        .gallery-header {
            padding: 30px 0 0 0;
        }

        .gallery-header .nav-tabs {
            background: #06070d;
            border-bottom: 2px solid #393d45;
        }

        .gallery-header .nav-link {
            font-size: 1.1em;
            font-weight: 400;
            color: #ccc;
            padding: 5px 15px;
        }

        .gallery-header .nav-link.active {
            color: #000;
            border-bottom: 2px solid #000;
        }

        .gallery-container {
            display: flex;
            gap: 15px;
            width: 100%;
            background: #06070d;
        }

        .gallery-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .gallery-item {
            width: 100%;
            position: relative;
        }

        .gallery-image {
            width: 100%;
            height: auto;
            object-fit: cover;
            cursor: pointer;
        }

        .gallery-item :hover {
            border: 1px solid #ff005d;
        }

        .caption {
            font-size: 14px;
            color: #fff;
            text-align: center;
            padding: 8px 0;
            width: 100%;
            background: #06070d;
        }

        @media (max-width: 992px) {
            .gallery-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 576px) {
            .gallery-container {
                display: block;
            }

            .gallery-column {
                margin-bottom: 15px;
            }
        }

        .image-modal .modal-dialog {
            max-width: 90%;
            width: 90%;
            margin: 0 auto;
        }

        .image-modal .modal-content {
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
        }

        .image-modal .modal-body {
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .papermaskDetailTop {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-height: 80vh;
            overflow: hidden;
        }

        .papermaskDetailTop-zoom {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .papermaskDetailBottom, .papermaskDetailClose {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            background: #f8f8f8;
        }

        .papermaskDetailBottom img, .papermaskDetailClose img {
            cursor: pointer;
            pointer-events: auto;
        }

        @media (max-width: 576px) {
            .image-modal .modal-dialog {
                max-width: 100%;
                width: 100%;
                height: 100vh;
                margin: 0;
            }

            .papermaskDetailTop-zoom {
                max-height: 60vh;
            }
        }

        img.lazy {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        img.lazy[src] {
            opacity: 1;
        }
    </style>
</head>

<body>
    <div class="floating-text" id="floatingText">
        <span>SLの関係についての私の考え：
        <br>
        二次創作における恋愛的な解釈については、私もすんなり受け入れます。純粋で美しい愛情を描くのも、不健全で歪んだ、さらには暗く湿った感情を表現するのも、どちらもすごく楽しんで鑑賞しています。
        <br>ただ、本家の設定においては、SLは単純な恋愛関係ではないが確かにそこに愛があることは間違いないです。
        <br>
        二人は師弟、主従、母娘、神と信徒、革命の戦友であり……こうした様々な立場が重なり合って、彼女たちの間に深いかつ複雑な絆を築き上げています。
        この絆の核心は、単一のラベルを超えた、もっと深い愛にあるのです。</span>
        <button class="close-button" onclick="document.getElementById('floatingText').style.display='none'">×</button>
    </div>

    <div class="gallery-section mt-5">
        <div class="gallery-header mb-3">
            <ul class="nav nav-tabs" id="galleryTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="gallery-tab" data-bs-toggle="tab" href="#gallery" role="tab"
                        aria-controls="gallery" aria-selected="true">イラスト</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="r18g-tab" data-bs-toggle="tab" href="#r18g" role="tab" aria-controls="r18g"
                        aria-selected="false">メインストーリー/本編</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="lonly-tab" data-bs-toggle="tab" href="#lonly" role="tab" aria-controls="lonly"
                        aria-selected="false">L</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="sonly-tab" data-bs-toggle="tab" href="#sonly" role="tab" aria-controls="sonly"
                        aria-selected="false">S</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="dc-tab" data-bs-toggle="tab" href="#dc" role="tab" aria-controls="dc"
                        aria-selected="false">テーマ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="doodle-tab" data-bs-toggle="tab" href="#doodle" role="tab" aria-controls="doodle"
                        aria-selected="false">落書き</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="manga-tab" data-bs-toggle="tab" href="#manga" role="tab" aria-controls="manga"
                        aria-selected="false">漫画</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="costume-tab" data-bs-toggle="tab" href="#costume" role="tab" aria-controls="costume"
                        aria-selected="false">衣装</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="death-tab" data-bs-toggle="tab" href="#death" role="tab" aria-controls="death"
                        aria-selected="false">死后</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="catdw-tab" data-bs-toggle="tab" href="#catdw" role="tab" aria-controls="catdw"
                        aria-selected="false">ふわふわ（擬獣化SD）</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="mansion-tab" data-bs-toggle="tab" href="#mansion" role="tab" aria-controls="mansion"
                        aria-selected="false">邸宅</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" id="travel-tab" data-bs-toggle="tab" href="#travel" role="tab" aria-controls="travel"
                        aria-selected="false">両生還後の旅行</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="food-tab" data-bs-toggle="tab" href="#food" role="tab" aria-controls="food"
                        aria-selected="false">食べ物</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="nsfw-tab" data-bs-toggle="tab" href="#nsfw" role="tab" aria-controls="nsfw"
                        aria-selected="false">NSFW</a>
                </li>

            </ul>
        </div>
        <div class="tab-content" id="galleryTabContent">
            <div class="tab-pane fade" id="r18g" role="tabpanel" aria-labelledby="r18g-tab">
                <div class="gallery-container" id="r18gContainer"></div>
            </div>
            <div class="tab-pane fade show active" id="gallery" role="tabpanel" aria-labelledby="gallery-tab">
                <div class="gallery-container" id="galleryContainer"></div>
            </div>
            <div class="tab-pane fade" id="dc" role="tabpanel" aria-labelledby="dc-tab">
                <div class="gallery-container" id="dcContainer"></div>
            </div>
            <div class="tab-pane fade" id="death" role="tabpanel" aria-labelledby="death-tab">
                <div class="gallery-container" id="deathContainer"></div>
            </div>
            <div class="tab-pane fade" id="manga" role="tabpanel" aria-labelledby="manga-tab">
                <div class="gallery-container" id="mangaContainer"></div>
            </div>
            <div class="tab-pane fade" id="mansion" role="tabpanel" aria-labelledby="mansion-tab">
                <div class="gallery-container" id="mansionContainer"></div>
            </div>
            <div class="tab-pane fade" id="doodle" role="tabpanel" aria-labelledby="doodle-tab">
                <div class="gallery-container" id="doodleContainer"></div>
            </div>
            <div class="tab-pane fade" id="catdw" role="tabpanel" aria-labelledby="catdw-tab">
                <div class="gallery-container" id="catdwContainer"></div>
            </div>
            <div class="tab-pane fade" id="nsfw" role="tabpanel" aria-labelledby="nsfw-tab">
                <div class="gallery-container" id="nsfwContainer"></div>
            </div>

            <div class="tab-pane fade" id="travel" role="tabpanel" aria-labelledby="travel-tab">
                <div class="gallery-container" id="travelContainer"></div>
            </div>
            <div class="tab-pane fade" id="food" role="tabpanel" aria-labelledby="food-tab">
                <div class="gallery-container" id="foodContainer"></div>
            </div>
            <div class="tab-pane fade" id="lonly" role="tabpanel" aria-labelledby="lonly-tab">
                <div class="gallery-container" id="lonlyContainer"></div>
            </div>
            <div class="tab-pane fade" id="sonly" role="tabpanel" aria-labelledby="sonly-tab">
                <div class="gallery-container" id="sonlyContainer"></div>
            </div>
            <div class="tab-pane fade" id="costume" role="tabpanel" aria-labelledby="costume-tab">
                <div class="gallery-container" id="costumeContainer"></div>
            </div>
        </div>
    </div>

    <div class="modal fade image-modal" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="papermaskDetailTop" data-mouse="small">
                <img src="#" alt="" data-mouse="small" class="papermaskDetailTop-zoom" id="papermaskDetailTop-zoom">
            </div>
            <div class="papermaskDetailBottom" data-mouse="mid">
                <img src="img/paperDetail/b.png" alt="放大" onclick="handleZoomChange(1)">
                <img src="img/paperDetail/s.png" alt="缩小" onclick="handleZoomChange(-1)">
                <img src="img/paperDetail/a.png" alt="重置" onclick="handleZoomChange(0)">
                <img src="img/paperDetail/d.png" alt="下载" onclick="handleDownload()">
            </div>
            <div class="papermaskDetailClose">
                <img src="img/paperDetail/c.png" alt="关闭" onclick="paperShowHide()">
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="js/papermaskDetail.js"></script>
    <script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
            return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
            if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
                try {
                    var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                    var firstSheetName = workbook.SheetNames[0];
                    var worksheet = workbook.Sheets[firstSheetName];
                    var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                    var filteredData = jsonData.filter(row => row.some(filledCell));
                    var headerRowIndex = filteredData.findIndex((row, index) =>
                        row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                    );
                    if (headerRowIndex === -1 || headerRowIndex > 25) {
                        headerRowIndex = 0;
                    }
                    var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
                    csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                    return csv;
                } catch (e) {
                    console.error(e);
                    return "";
                }
            }
            return gk_fileData[filename] || "";
        }

        const r18gImages = [
        { src: "img/SL/001.jpg", alt: "Gallery Image 1", description: "Blue Rain-005「何のために戦うか」P1" },
          { src: "img/SL/002.jpg", alt: "Gallery Image 2", description: "「何のために戦うか」P2" },
          { src: "img/SL/003.jpg", alt: "Gallery Image 3", description: "「何のために戦うか」P3" },
          { src: "img/SL/004.jpg", alt: "Gallery Image 4", description: "「何のために戦うか」P4" },
          { src: "img/SL/005.jpg", alt: "Gallery Image 5", description: "「何のために戦うか」P5" },
          { src: "img/SL/006.jpg", alt: "Gallery Image 6", description: "「何のために戦うか」P6" },
          { src: "img/SL/007.jpg", alt: "Gallery Image 7", description: "「何のために戦うか」P7" },
          { src: "img/SL/008.jpg", alt: "Gallery Image 7", description: "「何のために戦うか」P8" },
          { src: "img/L/L-1.jpg", alt: "メインストーリー/本編", description: "【メインストーリー/本編】Lの過去 P1-P7" },
          { src: "img/XL/zhuxian1.jpg", alt: "メインストーリー", description: "【猫猫バージョン】Lの過去 P1-P6" },
          { src: "img/SL/g2.webp", alt: "R18-G Image 2", description: "【BAD END-IF】Xからのご挨拶――Lの中で一番重い存在、その死骸" },
          { src: "img/SL/g1.webp", alt: "R18-G Image 1", description: "【BAD END-IF】" },
          { src: "img/SL/zhuxian3.webp", alt: "Gallery Image 8", description: "Blue Rain-007「登場」" },
      ];
      const galleryImages = [
          { src: "img/SL/SL1.webp", alt: "Gallery Image 1", description: "「中秋の名月」  犯罪組織の主宰者と部下の殺し屋" },
          { src: "img/SL/SL2.webp", alt: "Gallery Image 2", description: "「運命の舞台」  死神と信者" },
          { src: "img/SL/SL3.webp", alt: "Gallery Image 3", description: "吸血鬼貴族とその専属の仕立て屋（WIP）" },
          { src: "img/SL/SL4.webp", alt: "Gallery Image 4", description: "&お姫様抱っこ" },
          { src: "img/SL/SL5.webp", alt: "Gallery Image 5", description: "" },
          { src: "img/SL/SL6.webp", alt: "Gallery Image 6", description: "" },
          { src: "img/SL/SL7.webp", alt: "Gallery Image 7", description: "" },
          { src: "img/SL/SL8.webp", alt: "Gallery Image 7", description: "" },
          { src: "img/SL/SL9.webp", alt: "Gallery Image 9", description: "" },
          { src: "img/SL/SL10.webp", alt: "Gallery Image 10", description: "" },
          { src: "img/SL/SL11.webp", alt: "Gallery Image 11", description: "" },
          { src: "img/SL/SL12.webp", alt: "Gallery Image 12", description: "" },
          { src: "img/SL/SL13.webp", alt: "Gallery Image 13", description: "" },
          { src: "img/SL/SL14.webp", alt: "Gallery Image 14", description: "" },
          { src: "img/SL/SL15.webp", alt: "Gallery Image 15", description: "" },
          { src: "img/SL/SL16.webp", alt: "Gallery Image 16", description: "" },
          { src: "img/SL/SL17.webp", alt: "Gallery Image 17", description: "" },
          { src: "img/SL/SL18.webp", alt: "Gallery Image 18", description: "同人誌表紙" },
          { src: "img/SL/SL19.webp", alt: "Gallery Image 19", description: "" },
          { src: "img/SL/SL20.webp", alt: "Gallery Image 20", description: "" },
          { src: "img/SL/SL21.webp", alt: "Gallery Image 21", description: "" },
/*           { src: "img/SL/SL22.webp", alt: "Gallery Image 22", description: "" }, */
/*           { src: "img/SL/SL23.webp", alt: "Gallery Image 23", description: "" } */
      ];

      const dcImages = [
          { src: "img/DC/DC1.webp", alt: "DC Image 1", description: "主従" },
          { src: "img/DC/DC2.webp", alt: "DC Image 2", description: "" },
          { src: "img/DC/风声.jpg", alt: "DC Image 3", description: "戦友——映画『风声』" },
          { src: "img/DC/DC3.webp", alt: "DC Image 3", description: "" },
          { src: "img/DC/DC4.jpg", alt: "DC Image 4", description: "聖母憐子像" },
          { src: "img/DC/DC4-2.jpg", alt: "DC Image 5", description: "" },
          { src: "img/DC/chadui2.jpg", alt: "DC Image 5", description: "" },
          { src: "img/DC/DecisiontoLeave1.jpg", alt: "DC Image 5", description: "共犯——映画『Decision to Leave』(2022)" },
          { src: "img/DC/Dolores.Claiborne1.jpg", alt: "DC Image 5", description: "映画『Dolores Claiborne』(1995)" },
          { src: "img/DC/Dolores.Claiborne2.jpg", alt: "DC Image 5", description: "映画『Dolores Claiborne』(1995)" },
          { src: "img/DC/DC5.webp", alt: "DC Image 5", description: "母女————映画『Pearl』(2022)" },
          { src: "img/DC/Cracks.jpg", alt: "DC Image 5", description: "映画『Cracks』" },
          { src: "img/DC/水下.jpg", alt: "DC Image 5", description: "曖昧な" },
          { src: "img/DC/chadui1.jpg", alt: "DC Image 6", description: "" },
          { src: "img/DC/DC5-2.webp", alt: "DC Image 5", description: "主従" },
          { src: "img/DC/DC5-3.webp", alt: "DC Image 5", description: "" },
          { src: "img/DC/DC6.jpg", alt: "DC Image 6", description: "映画『Bedevilled』(2010)" },
          { src: "img/DC/ThrillMe-8.webp", alt: "DC Image 5", description: "ミュージカル『Thrill Me』" },
          { src: "img/DC/DC7.webp", alt: "DC Image 7", description: "" },
          { src: "img/DC/DC7.jpg", alt: "DC Image 7", description: "" },
          { src: "img/DC/火报纸2.webp", alt: "DC Image 7", description: "" },
          { src: "img/DC/DC8.webp", alt: "DC Image 8", description: "" },
          { src: "img/DC/DC9.webp", alt: "DC Image 9", description: "" },
          { src: "img/DC/DC10.webp", alt: "DC Image 10", description: "" },
          { src: "img/DC/DC11.webp", alt: "DC Image 11", description: "" },
          { src: "img/DC/DC12.webp", alt: "DC Image 12", description: "" },
          { src: "img/DC/DC12-2.webp", alt: "DC Image 12", description: "雪の花を手のひらに留めておきたいが、溶けるのを早めてしまうだけだな。" },
          { src: "img/DC/DC13.webp", alt: "DC Image 13", description: "" },
          { src: "img/DC/DC13-2.webp", alt: "DC Image 13", description: "" },
          { src: "img/DC/DC14.webp", alt: "DC Image 14", description: "" },
          { src: "img/DC/DC15.webp", alt: "DC Image 15", description: "" },
          { src: "img/DC/DC16.webp", alt: "DC Image 16", description: "" },
          { src: "img/DC/DC17.jpg", alt: "DC Image 17", description: "" },
          { src: "img/DC/DC18.webp", alt: "DC Image 18", description: "" },
          { src: "img/DC/DC19.webp", alt: "DC Image 19", description: "" },
          { src: "img/DC/OriginalSin.jpg", alt: "DC Image 19", description: "映画『Original Sin』(2001)" },
          { src: "img/DC/DC20.jpg", alt: "DC Image 19", description: "" },
          { src: "img/DC/DC21.jpg", alt: "DC Image 19", description: "" },
      ];

      const deathImages = [
          { src: "img/Death/death1.webp", alt: "Death Image 1", description: "" },
          { src: "img/Death/death2.webp", alt: "Death Image 2", description: "Lの登場スタイルは、こんな感じ。" },
          { src: "img/Death/death3.webp", alt: "Death Image 3", description: "" },
          { src: "img/Death/death4.webp", alt: "Death Image 4", description: "" },
          { src: "img/Death/death5.webp", alt: "Death Image 5", description: "" },
          { src: "img/Death/death6.webp", alt: "Death Image 6", description: "" },
          { src: "img/Death/death7.webp", alt: "Death Image 7", description: "" },
          { src: "img/Death/death8.webp", alt: "Death Image 8", description: "" },
          { src: "img/Death/death9.webp", alt: "Death Image 9", description: "" }
      ];

      const mangaImages = [
      { src: "img/SL/001.jpg", alt: "Gallery Image 1", description: "Blue Rain-005「何のために戦うか」P1" },
          { src: "img/SL/002.jpg", alt: "Gallery Image 2", description: "「何のために戦うか」P2" },
          { src: "img/SL/003.jpg", alt: "Gallery Image 3", description: "「何のために戦うか」P3" },
          { src: "img/SL/004.jpg", alt: "Gallery Image 4", description: "「何のために戦うか」P4" },
          { src: "img/SL/005.jpg", alt: "Gallery Image 5", description: "「何のために戦うか」P5" },
          { src: "img/SL/006.jpg", alt: "Gallery Image 6", description: "「何のために戦うか」P6" },
          { src: "img/SL/007.jpg", alt: "Gallery Image 7", description: "「何のために戦うか」P7" },
          { src: "img/SL/008.jpg", alt: "Gallery Image 7", description: "「何のために戦うか」P8" },
          { src: "img/SL/MH/1.webp", alt: "Manga Image 1", description: "本編BAD END「They can't hurt you anymore.」①" },
          { src: "img/SL/MH/2.webp", alt: "Manga Image 2", description: "本編BAD END「They can't hurt you anymore.」②" },
          { src: "img/SL/MH/3.webp", alt: "Manga Image 3", description: "本編BAD END「They can't hurt you anymore.」③" },
          { src: "img/SL/MH/4.webp", alt: "Manga Image 4", description: "AU2「針」" },
          { src: "img/SL/MH/5.webp", alt: "Manga Image 5", description: "AU2「針」" },
          { src: "img/SL/MH/6.webp", alt: "Manga Image 6", description: "AU2「針」" },
          { src: "img/SL/MH/7.webp", alt: "Manga Image 7", description: "AU7" },
          { src: "img/SL/MH/8.webp", alt: "Manga Image 8", description: "AU7" },
          { src: "img/SL/MH/9.webp", alt: "Manga Image 9", description: "AU7" }
      ];

      const mansionImages = [
          { src: "img/FZ/DD1.jpg", alt: "Mansion Image 1", description: "" },
          { src: "img/FZ/DD2.jpg", alt: "Mansion Image 2", description: "" },
          { src: "img/FZ/DD3.jpg", alt: "Mansion Image 3", description: "" },
          { src: "img/FZ/livingroom1.webp", alt: "Mansion Image 4", description: "living room1" },
          { src: "img/FZ/livingroom2.webp", alt: "Mansion Image 5", description: "living room2" },
          { src: "img/FZ/4.webp", alt: "Mansion Image 6", description: "living room3" },
          { src: "img/FZ/bed.webp", alt: "Mansion Image 7", description: "Lの寝室にある、凝ったデザインのゴシック風ベッド。昔はLだけが寝てたけど、今はSも寝れるし、剥いたザクロを食べながらゴロゴロすることもできる。" },
          { src: "img/FZ/tailorshop.webp", alt: "Mansion Image 8", description: "Sの仕立て屋" },
          { src: "img/FZ/garden.webp", alt: "Mansion Image 9", description: "「GARDEN」" },
          { src: "img/FZ/1.webp", alt: "Mansion Image 10", description: "" },
          { src: "img/FZ/2.webp", alt: "Mansion Image 11", description: "" },
          { src: "img/FZ/3.webp", alt: "Mansion Image 12", description: "庭園" },
          { src: "img/FZ/4.webp", alt: "Mansion Image 13", description: "" },
          { src: "img/FZ/5.webp", alt: "Mansion Image 14", description: "" },
          { src: "img/FZ/6.webp", alt: "Mansion Image 15", description: "落ち葉" },
          { src: "img/FZ/closet1.webp", alt: "Mansion Image 10", description: "closet" },
  { src: "img/FZ/closet1.webp", alt: "Mansion Image 1", description: "closet" },
  { src: "img/FZ/closet2.webp", alt: "Mansion Image 2", description: "closet" },
  { src: "img/FZ/closet3.webp", alt: "Mansion Image 3", description: "closet" },
  { src: "img/FZ/closet4.webp", alt: "Mansion Image 4", description: "closet" },
  { src: "img/FZ/closet5.webp", alt: "Mansion Image 5", description: "closet" },
  { src: "img/FZ/closet6.webp", alt: "Mansion Image 6", description: "closet" },
  { src: "img/FZ/closet7.webp", alt: "Mansion Image 7", description: "closet" },
  { src: "img/FZ/closet8.webp", alt: "Mansion Image 8", description: "closet" },
  { src: "img/FZ/closet9.webp", alt: "Mansion Image 9", description: "closet" },
  { src: "img/FZ/closet10.webp", alt: "Mansion Image 10", description: "closet" }
      ];

      const doodleImages = [
          { src: "img/SL/ty/ty1.webp", alt: "Doodle Image 1", description: "お姫様抱っこ" },
          { src: "img/SL/ty/chadui1.jpg", alt: "Doodle Image 1", description: "舞" },
          { src: "img/SL/ty/ty3.webp", alt: "Doodle Image 3", description: "小さくなった！？" },
          { src: "img/SL/ty/ty4.webp", alt: "Doodle Image 4", description: "眠？イチャイチャ" },
          { src: "img/SL/ty/ty6.jpg", alt: "Doodle Image 8", description: "「最近冷えるので 暖かく してください」" },
          { src: "img/SL/ty/ty5.webp", alt: "Doodle Image 5", description: "" },
          { src: "img/SL/ty/chadui2.jpg", alt: "Doodle Image 1", description: "Kissing Hands" },
          { src: "img/SL/ty/ty6.webp", alt: "Doodle Image 6", description: "" },
          { src: "img/SL/ty/ty7.webp", alt: "Doodle Image 7", description: "Kiss" },
          { src: "img/SL/ty/chadui4.jpg", alt: "Doodle Image 8", description: "Lが出張する時、Lのベッドで寝ることがある（Lにバレたことがあって、その後Sは同型のマットレスをワンセットもらった）" },
          { src: "img/SL/ty/ty2.webp", alt: "Doodle Image 2", description: "日常" },
          { src: "img/SL/ty/ty8.webp", alt: "Doodle Image 8", description: "甘噛み" },
          { src: "img/SL/ty/ty9.webp", alt: "Doodle Image 9", description: "眠る" },
          { src: "img/SL/ty/chadui3.jpg", alt: "Doodle Image 1", description: "舞" },
          { src: "img/SL/ty/ty10.webp", alt: "Doodle Image 10", description: "二人の子供時代を埋め合わせるため、LはSを遊園地に連れて行く。" },
          { src: "img/SL/ty/ty11.webp", alt: "Doodle Image 11", description: "" },
          { src: "img/SL/ty/ty12.webp", alt: "Doodle Image 12", description: "いらないわ～" },
          { src: "img/SL/ty/ty13.webp", alt: "Doodle Image 13", description: "学パロ" }
      ];

      const catdwImages = [
          { src: "img/SL/cat/dw1.webp", alt: "Catdw Image 1", description: "猫と狼" },
          { src: "img/SL/cat/dw2.webp", alt: "Catdw Image 2", description: "猫猫大家族" },
          { src: "img/SL/cat/dw3.webp", alt: "Catdw Image 3", description: "猫と狼" },
          { src: "img/SL/cat/dw4.webp", alt: "Catdw Image 4", description: "猫" },
          { src: "img/SL/cat/dw5.webp", alt: "Catdw Image 5", description: "" },
          { src: "img/SL/cat/dw6.webp", alt: "Catdw Image 6", description: "猫猫ジェンガ" },
          { src: "img/SL/cat/dw7.jpg", alt: "Catdw Image 6", description: "猫猫LOVE" },
          { src: "img/SL/cat/DC7.jpg", alt: "Catdw Image 7", description: "" },
          { src: "img/SL/cat/DC8.jpg", alt: "Catdw Image 8", description: "" },
          { src: "img/SL/cat/dw8.jpg", alt: "Catdw Image 8", description: "九尾の狐と虎" },
          { src: "img/SL/cat/DC9.jpg", alt: "Catdw Image 8", description: "" },
          { src: "img/SL/cat/dw7.webp", alt: "Catdw Image 7", description: "" },
          { src: "img/L/sd/sd9.webp", alt: "SD Image 9", description: "" },
          { src: "img/SL/cat/dw8.webp", alt: "Catdw Image 8", description: "猫と九尾の狐" },
          { src: "img/SL/cat/DC6.webp", alt: "Catdw Image 9", description: "" },
          { src: "img/SL/cat/shiyuanshou.gif", alt: "Catdw Image 9", description: "噬元獣（フラーケン） キャプテン・マーベル(映画)" },
          { src: "img/SL/cat/cat2.jpg", alt: "L Image 8", description: "" },
          { src: "img/L/sd/sd1.webp", alt: "SD Image 1", description: "" },
            { src: "img/L/sd/sd2.webp", alt: "SD Image 2", description: "" },
            { src: "img/L/sd/sd3.webp", alt: "SD Image 3", description: "" },
            { src: "img/L/sd/sd4.webp", alt: "SD Image 4", description: "" },
            { src: "img/L/sd/sd5.jpg", alt: "SD Image 5", description: "" },
            { src: "img/L/sd/sd5.webp", alt: "SD Image 5", description: "" },
            { src: "img/L/sd/sd6.png", alt: "SD Image 7", description: "" },
            { src: "img/L/sd/sd6.webp", alt: "SD Image 6", description: "" },
            { src: "img/L/sd/sd7.webp", alt: "SD Image 7", description: "" },
            { src: "img/L/sd/sd8.webp", alt: "SD Image 8", description: "" },

            { src: "img/L/sd/tiger1.jpg", alt: "SD Image 8", description: "" },
      ];

      const nsfwImages = [
          { src: "img/SL/nsfw1.webp", alt: "NSFW Image 1", description: "" },
          { src: "img/SL/nsfw2.webp", alt: "NSFW Image 2", description: "体型の設定に誤りがありますので、参考にしないでください。" },
          { src: "img/SL/nsfw3.webp", alt: "NSFW Image 3", description: "体型の設定に誤りがありますので、参考にしないでください。" },
          { src: "img/SL/nsfw4.webp", alt: "NSFW Image 4", description: "体型華奢" },
          { src: "img/SL/nsfw5.webp", alt: "NSFW Image 4", description: "S体型参考" },
      ];
        const travelImages = [
  { src: "img/SL/travel/travel1.webp", alt: "Travel Image 1", description: "イタリア BGM：Mystery of Love" },
  { src: "img/SL/travel/travel1-2.webp", alt: "Travel Image 1", description: "" },
  { src: "img/SL/travel/travel1-3.webp", alt: "Travel Image 1", description: "" },
  { src: "img/SL/travel/travel2.webp", alt: "Travel Image 2", description: "海" },
  { src: "img/SL/travel/travel3.webp", alt: "Travel Image 3", description: "イタリア" },
  { src: "img/SL/travel/travel4.webp", alt: "Travel Image 4", description: "" },
  { src: "img/SL/travel/travel5.webp", alt: "Travel Image 5", description: "フィンランド" },
  { src: "img/SL/travel/travel6.jpg", alt: "Travel Image 6", description: "水" },
  { src: "img/SL/travel/travel17.jpg", alt: "Travel Image 17", description: "" },
  { src: "img/SL/travel/travel7.jpg", alt: "Travel Image 7", description: "ブルースの夜" },
  { src: "img/SL/travel/travel6.webp", alt: "Travel Image 5", description: "" },
  { src: "img/SL/travel/travel8.webp", alt: "Travel Image 8", description: "冬のロンドン" },
  { src: "img/SL/travel/travel9.webp", alt: "Travel Image 9", description: "" },
  { src: "img/SL/travel/travel10.webp", alt: "Travel Image 10", description: "" },
  { src: "img/SL/travel/travel11.webp", alt: "Travel Image 11", description: "" },
  { src: "img/SL/travel/travel12.webp", alt: "Travel Image 12", description: "" },
  { src: "img/SL/travel/travel13.webp", alt: "Travel Image 13", description: "" },
  { src: "img/SL/travel/travel14.webp", alt: "Travel Image 14", description: "" },
  { src: "img/SL/travel/travel15.webp", alt: "Travel Image 15", description: "" },
  { src: "img/SL/travel/travel16.jpg", alt: "Travel Image 16", description: "" },
  { src: "img/SL/travel/travel18.webp", alt: "Travel Image 18", description: "" },
  { src: "img/SL/travel/travel19.webp", alt: "Travel Image 19", description: "" },
  { src: "img/SL/travel/travel20.webp", alt: "Travel Image 20", description: "" },
  { src: "img/SL/travel/travel21.webp", alt: "Travel Image 21", description: "" },
  { src: "img/SL/travel/travel22.webp", alt: "Travel Image 22", description: "" },
  { src: "img/SL/travel/travel23.webp", alt: "Travel Image 23", description: "" },
  { src: "img/SL/travel/travel24.webp", alt: "Travel Image 24", description: "" },
  { src: "img/SL/travel/travel25.webp", alt: "Travel Image 25", description: "" },
  { src: "img/SL/travel/travel26.webp", alt: "Travel Image 26", description: "" },
  { src: "img/SL/travel/travel27.webp", alt: "Travel Image 27", description: "" },
  { src: "img/SL/travel/travel28.webp", alt: "Travel Image 28", description: "" },
  { src: "img/SL/travel/travel29.webp", alt: "Travel Image 29", description: "" },
  { src: "img/SL/travel/travel30.webp", alt: "Travel Image 30", description: "" },
  { src: "img/SL/travel/travel31.webp", alt: "Travel Image 31", description: "" },
  { src: "img/SL/travel/travel32.webp", alt: "Travel Image 32", description: "" },
  { src: "img/SL/travel/travel33.webp", alt: "Travel Image 33", description: "" },
  { src: "img/SL/travel/travel34.webp", alt: "Travel Image 34", description: "" },
  { src: "img/SL/travel/travel35.webp", alt: "Travel Image 35", description: "" },
  { src: "img/SL/travel/travel36.webp", alt: "Travel Image 36", description: "" },
  { src: "img/SL/travel/travel37.webp", alt: "Travel Image 37", description: "" },
  { src: "img/SL/travel/travel38.webp", alt: "Travel Image 38", description: "" },
  { src: "img/SL/travel/travel39.webp", alt: "Travel Image 39", description: "" },
  { src: "img/SL/travel/travel40.webp", alt: "Travel Image 40", description: "" }
        ];
        const foodImages = [
  { src: "img/SL/food/food1.webp", alt: "Food Image 1", description: "アイスクリーム" },
  { src: "img/SL/food/food2.webp", alt: "Food Image 2", description: "" },
  { src: "img/SL/food/food3.webp", alt: "Food Image 3", description: "" },
  { src: "img/SL/food/food4.webp", alt: "Food Image 4", description: "" },
  { src: "img/SL/food/クリーム抹茶オレオのミルフィーユケーキ.webp", alt: "Food Image 2", description: "クリーム抹茶オレオのミルフィーユケーキ" },
  { src: "img/SL/food/food5.webp", alt: "Food Image 5", description: "" },
  { src: "img/SL/food/food6.webp", alt: "Food Image 6", description: "" },
  { src: "img/SL/food/food7.webp", alt: "Food Image 7", description: "" },
  { src: "img/SL/food/food8.webp", alt: "Food Image 8", description: "" },
  { src: "img/SL/food/food9.webp", alt: "Food Image 9", description: "ベリーとチョコのアイスクリーム" },
  { src: "img/SL/food/food10.webp", alt: "Food Image 10", description: "" },
  { src: "img/SL/food/food11.webp", alt: "Food Image 11", description: "" },
  { src: "img/SL/food/food12.webp", alt: "Food Image 12", description: "" },
  { src: "img/SL/food/food13.webp", alt: "Food Image 13", description: "" },
  { src: "img/SL/food/food14.webp", alt: "Food Image 14", description: "" },
  { src: "img/SL/food/food15.webp", alt: "Food Image 15", description: "" },
  { src: "img/SL/food/food16.webp", alt: "Food Image 16", description: "" },
  { src: "img/SL/food/food17.webp", alt: "Food Image 17", description: "" },
  { src: "img/SL/food/food18.webp", alt: "Food Image 18", description: "" },
  { src: "img/SL/food/food19.webp", alt: "Food Image 19", description: "" },
  { src: "img/SL/food/food20.webp", alt: "Food Image 20", description: "" },
  { src: "img/SL/food/food21.webp", alt: "Food Image 21", description: "" },
  { src: "img/SL/food/food22.webp", alt: "Food Image 22", description: "" },
  { src: "img/SL/food/food23.webp", alt: "Food Image 23", description: "" },
  { src: "img/SL/food/food24.webp", alt: "Food Image 24", description: "" },
  { src: "img/SL/food/food25.webp", alt: "Food Image 25", description: "" },
  { src: "img/SL/food/food26.webp", alt: "Food Image 26", description: "" },
  { src: "img/SL/food/food27.webp", alt: "Food Image 27", description: "" },
  { src: "img/SL/food/food28.webp", alt: "Food Image 28", description: "" },
  { src: "img/SL/food/food29.webp", alt: "Food Image 29", description: "" },
  { src: "img/SL/food/food30.webp", alt: "Food Image 30", description: "" },
  { src: "img/SL/food/food31.webp", alt: "Food Image 31", description: "" },
  { src: "img/SL/food/food32.webp", alt: "Food Image 32", description: "" },
  { src: "img/SL/food/food33.webp", alt: "Food Image 33", description: "" },
  { src: "img/SL/food/food34.webp", alt: "Food Image 34", description: "" },
  { src: "img/SL/food/food35.webp", alt: "Food Image 35", description: "" },
  { src: "img/SL/food/food36.webp", alt: "Food Image 36", description: "" },
  { src: "img/SL/food/food37.webp", alt: "Food Image 37", description: "" },
  { src: "img/SL/food/food38.webp", alt: "Food Image 38", description: "" },
  { src: "img/SL/food/food39.webp", alt: "Food Image 39", description: "" },
  { src: "img/SL/food/food40.webp", alt: "Food Image 40", description: "" }
        ];

        const lonlyImages = [
        { src: "img/L/L-1.jpg", alt: "メインストーリー/本編", description: "【公式】メインストーリー/本編" },
        { src: "img/L/L0.jpg", alt: "Gallery Image 1", description: "嵐を呼ぶ" },
            { src: "img/XL/zhuxian1.jpg", alt: "メインストーリー", description: "【公式】メインストーリー/本編（猫猫バージョン）" },
            { src: "img/L/L1.webp", alt: "Gallery Image 1", description: "" },
            
            { src: "img/L/L2.webp", alt: "Gallery Image 2", description: "危険な関系〜" },
            { src: "img/L/L3.webp", alt: "Gallery Image 3", description: "" },
            { src: "img/L/L4.webp", alt: "Gallery Image 4", description: "死と新生" },
            { src: "img/L/L5.webp", alt: "Gallery Image 5", description: "" },
            { src: "img/L/L6.webp", alt: "Gallery Image 6", description: "" },
            { src: "img/L/L7.webp", alt: "Gallery Image 7", description: "「供養」" },
            { src: "img/L/L8.webp", alt: "Gallery Image 8", description: "「孤独」" },
            { src: "img/L/L9.webp", alt: "Gallery Image 9", description: "「憤怒」" },
            { src: "img/L/L10.webp", alt: "Gallery Image 10", description: "" },
            { src: "img/L/L11.webp", alt: "Gallery Image 11", description: "" },
            { src: "img/L/L12.webp", alt: "Gallery Image 12", description: "" },
            { src: "img/L/L13.webp", alt: "Gallery Image 13", description: "" },
            { src: "img/L/L16.jpg", alt: "Gallery Image 14", description: "" },
            { src: "img/L/L15.webp", alt: "Gallery Image 15", description: "" }
        ];
        const sonlyImages = [
            { src: "img/S/S0.jpg", alt: "Gallery Image 1", description: "洗練" },
            { src: "img/S/S1.jpg", alt: "Gallery Image 1", description: "" },
            { src: "img/S/S2.jpg", alt: "Gallery Image 2", description: "" },
            { src: "img/S/S3.jpg", alt: "Gallery Image 3", description: "" },
            { src: "img/S/S4.jpg", alt: "Gallery Image 4", description: "" },
            { src: "img/S/S5.jpg", alt: "Gallery Image 5", description: "" },
            { src: "img/S/S6.jpg", alt: "Gallery Image 6", description: "" },
            { src: "img/S/S7.jpg", alt: "Gallery Image 7", description: "" },
            { src: "img/S/S8.jpg", alt: "Gallery Image 8", description: "落書き" },
            { src: "img/S/S9.jpg", alt: "Gallery Image 9", description: "" },
            { src: "img/S/S10.jpg", alt: "Gallery Image 10", description: "" },
            { src: "img/S/S11.jpg", alt: "Gallery Image 11", description: "落書き" },
            { src: "img/S/S12.jpg", alt: "Gallery Image 12", description: "落書き" },
            { src: "img/S/S13.jpg", alt: "Gallery Image 13", description: "落書き" },
            { src: "img/S/S14.jpg", alt: "Gallery Image 14", description: "ペルセポネー" },
            { src: "img/S/S15.jpg", alt: "Gallery Image 15", description: "" },
            { src: "img/S/S16.jpg", alt: "Gallery Image 11", description: "" },
            { src: "img/S/S17.jpg", alt: "Gallery Image 12", description: "" },
            { src: "img/S/S18.jpg", alt: "Gallery Image 13", description: "" },
            { src: "img/S/S19.jpg", alt: "Gallery Image 14", description: "" },
            { src: "img/S/S20.jpg", alt: "Gallery Image 15", description: "" },
        ];
        const costumeImages = [
        { src: "img/cloakroom/L01 - 「礼服」（傘のデザイン、すごく好き）.jpg", alt: "Gallery Image 1", description: "L01 - 「礼服」（傘のデザイン、すごく好き）" },
        { src: "img/cloakroom/L西洋衣装2-1.png", alt: "Gallery Image 1", description: "L02 - 「礼服」（靴のデザインが好き）" },
        { src: "img/cloakroom/L西洋衣装2-2.png", alt: "Gallery Image 1", description: "L02 - 「礼服」（）" },
        { src: "img/cloakroom/L03 - 「パジャマ」.png", alt: "Gallery Image 1", description: "L03 - 「パジャマ」" },
        { src: "img/cloakroom/L04 - 「礼服」.png", alt: "Gallery Image 1", description: "L04 - 「礼服」" },
        { src: "img/cloakroom/L05 - 「宴の領主」.jpg", alt: "Gallery Image 1", description: "L05 - 「宴の領主」" },
        { src: "img/cloakroom/L06 - 「和服」.png", alt: "Gallery Image 1", description: "L06 - 「和服」" },
        { src: "img/cloakroom/S01 - 「仕立て屋に化けた殺し屋」（メインストーリー）.jpg", alt: "Gallery Image 1", description: "S01 - 「仕立て屋に化けた殺し屋」（メインストーリー）" },
        { src: "img/cloakroom/S02 - 「信者」（jacket）.png", alt: "Gallery Image 1", description: "S02 - 「信者」（jacket）" },
        { src: "img/cloakroom/S02 - 「信者」.png", alt: "Gallery Image 1", description: "S02 - 「信者」" },
        { src: "img/cloakroom/S03 - 「幼少期」（たまにはズボンもいいよね）.jpg", alt: "Gallery Image 1", description: "S03 - 「幼少期」（たまにはズボンもいいよね）" },
        { src: "img/cloakroom/S04「幼少期」.jpg", alt: "Gallery Image 1", description: "S04「幼少期」" },
        { src: "img/cloakroom/S05 - 「礼服」.png", alt: "Gallery Image 1", description: "S05 - 「礼服」" },
        { src: "img/cloakroom/S06 - 「和服」.jpg", alt: "Gallery Image 1", description: "S06 - 「和服」" },
        { src: "img/cloakroom/S06 - 「和服」（additional）.png", alt: "Gallery Image 1", description: "S06 - 「和服」（additional）" },
        ];

        function arrangeWaterfall(containerId, imageArray) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";

            const width = window.innerWidth;
            const columnCount = width > 992 ? 3 : width > 576 ? 2 : 1;

            const columns = Array(columnCount).fill().map(() => {
                const col = document.createElement("div");
                col.className = "gallery-column";
                container.appendChild(col);
                return col;
            });

            imageArray.forEach((image, index) => {
                const item = document.createElement("div");
                item.className = "gallery-item";

                const img = document.createElement("img");
                img.setAttribute("data-src", image.src);
                img.alt = image.alt;
                img.className = "img-fluid gallery-image lazy";
                img.setAttribute("data-bs-toggle", "modal");
                img.setAttribute("data-bs-target", "#imageModal");
                img.setAttribute("data-index", index);
                img.setAttribute("data-description", image.description);
                img.setAttribute("data-array",
                    containerId === "galleryContainer" ? "gallery" :
                    containerId === "dcContainer" ? "dc" :
                    containerId === "deathContainer" ? "death" :
                    containerId === "mangaContainer" ? "manga" :
                    containerId === "mansionContainer" ? "mansion" :
                    containerId === "doodleContainer" ? "doodle" :
                    containerId === "catdwContainer" ? "catdw" :
                    containerId === "nsfwContainer" ? "nsfw" :
                    containerId === "r18gContainer" ? "r18g" :
                    containerId === "travelContainer" ? "travel" :
                    containerId === "foodContainer" ? "food" : "");
                img.src = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";

                const caption = document.createElement("div");
                caption.className = "caption";
                caption.textContent = image.description || "";

                item.appendChild(img);
                item.appendChild(caption);
                columns[index % columnCount].appendChild(item);

                img.removeEventListener("click", handleImageClick);
                img.addEventListener("click", handleImageClick);
            });

            lazyLoadImages();
        }

        function handleImageClick() {
            const src = this.getAttribute("data-src");
            const description = this.getAttribute("data-description");
            currentIndex = parseInt(this.getAttribute("data-index"));
            currentArray = this.getAttribute("data-array");
            const modalImage = document.getElementById("papermaskDetailTop-zoom");
            modalImage.src = src;
            if (typeof $ !== 'undefined') {
                $(".papermaskDetailTop-zoom").css("transform", "scale(1)");
            } else {
                modalImage.style.transform = 'scale(1)';
            }
            papermaskZoom = 1;
            if (typeof updatePapermaskDetail === 'function') {
                updatePapermaskDetail(src, description || "暂无说明");
            }
        }

        function initializeTabs() {
            arrangeWaterfall("galleryContainer", galleryImages);
            arrangeWaterfall("dcContainer", dcImages);
            arrangeWaterfall("deathContainer", deathImages);
            arrangeWaterfall("mangaContainer", mangaImages);
            arrangeWaterfall("mansionContainer", mansionImages);
            arrangeWaterfall("doodleContainer", doodleImages);
            arrangeWaterfall("catdwContainer", catdwImages);
            arrangeWaterfall("nsfwContainer", nsfwImages);
            arrangeWaterfall("r18gContainer", r18gImages);
            arrangeWaterfall("travelContainer", travelImages);
            arrangeWaterfall("foodContainer", foodImages);
            arrangeWaterfall("lonlyContainer", lonlyImages);    // ← 新增
            arrangeWaterfall("sonlyContainer", sonlyImages);   // ← 新增
            arrangeWaterfall("costumeContainer", costumeImages);  // ← 新增这一行
        }

        function lazyLoadImages() {
            const images = document.querySelectorAll("img.lazy");
            const observer = new IntersectionObserver(
                (entries, observer) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.getAttribute("data-src");
                            img.classList.remove("lazy");
                            observer.unobserve(img);
                        }
                    });
                },
                {
                    rootMargin: "0px 0px 100px 0px",
                    threshold: 0.1
                }
            );

            images.forEach((img) => observer.observe(img));
        }

        let currentIndex = 0;
        let currentArray = "gallery";

        function papermaskDetailChange(direction) {
            const array =
                currentArray === "gallery" ? galleryImages :
                currentArray === "dc" ? dcImages :
                currentArray === "death" ? deathImages :
                currentArray === "manga" ? mangaImages :
                currentArray === "mansion" ? mansionImages :
                currentArray === "doodle" ? doodleImages :
                currentArray === "catdw" ? catdwImages :
                currentArray === "nsfw" ? nsfwImages :
                currentArray === "r18g" ? r18gImages :
                currentArray === "travel" ? travelImages :
                currentArray === "food" ? foodImages : [];
            if (direction === 1) {
                currentIndex = (currentIndex + 1) % array.length;
            } else if (direction === -1) {
                currentIndex = (currentIndex - 1 + array.length) % array.length;
            } else if (direction === 0) {
                currentIndex = 0;
            }
            const modalImage = document.getElementById("papermaskDetailTop-zoom");
            if (modalImage) {
                modalImage.src = array[currentIndex].src;
                if (typeof $ !== 'undefined') {
                    $(".papermaskDetailTop-zoom").css("transform", "scale(1)");
                } else {
                    modalImage.style.transform = 'scale(1)';
                }
                papermaskZoom = 1;
            }
            if (typeof updatePapermaskDetail === 'function') {
                updatePapermaskDetail(array[currentIndex].src, array[currentIndex].description || "暂无说明");
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            initializeTabs();
            document.querySelectorAll(".nav-link").forEach((tab) => {
                tab.addEventListener("mouseover", () => {
                    if (!tab.classList.contains("active")) {
                        const tabInstance = new bootstrap.Tab(tab);
                        tabInstance.show();
                    }
                });
                tab.addEventListener("shown.bs.tab", () => {
                    const target = tab.getAttribute("href").substring(1);
                    if (target === "gallery") arrangeWaterfall("galleryContainer", galleryImages);
                    else if (target === "dc") arrangeWaterfall("dcContainer", dcImages);
                    else if (target === "death") arrangeWaterfall("deathContainer", deathImages);
                    else if (target === "manga") arrangeWaterfall("mangaContainer", mangaImages);
                    else if (target === "mansion") arrangeWaterfall("mansionContainer", mansionImages);
                    else if (target === "doodle") arrangeWaterfall("doodleContainer", doodleImages);
                    else if (target === "catdw") arrangeWaterfall("catdwContainer", catdwImages);
                    else if (target === "nsfw") arrangeWaterfall("nsfwContainer", nsfwImages);
                    else if (target === "r18g") arrangeWaterfall("r18gContainer", r18gImages);
                    else if (target === "travel") arrangeWaterfall("travelContainer", travelImages);
                    else if (target === "food") arrangeWaterfall("foodContainer", foodImages);
                    else if (target === "lonly") arrangeWaterfall("lonlyContainer", lonlyImages);   // ← 新增
                    else if (target === "sonly") arrangeWaterfall("sonlyContainer", sonlyImages);   // ← 新增
                    else if (target === "costume") arrangeWaterfall("costumeContainer", costumeImages);  // ← 新增这一行
                });
            });
        });

        document.addEventListener("keydown", function (event) {
            if (document.getElementById("imageModal").classList.contains("show")) {
                if (event.key === "ArrowLeft") {
                    papermaskDetailChange(-1);
                } else if (event.key === "ArrowRight") {
                    papermaskDetailChange(1);
                }
            }
        });
    </script>
</body>
</html>